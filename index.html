<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì˜¤ë¥´ë½ë³„ í¬ì¸íŠ¸ ì›¹ì•±</title>
  <meta name="theme-color" content="#ffffff" />

  <style>
    :root{
      --bg:#ffffff;
      --ink:#111827;
      --muted:#6b7280;
      --line:#e5e7eb;
      --card:#f9fafb;
      --radius:16px;
      --shadow: 0 6px 22px rgba(0,0,0,.06);
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Apple SD Gothic Neo", "Malgun Gothic", "Noto Sans KR", sans-serif;
      background:var(--bg);
      color:var(--ink);
    }
    a{ color:inherit; }
    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 18px 16px 40px;
    }
    header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      padding: 10px 0 16px;
      border-bottom:1px solid var(--line);
    }
    .brand{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .brand h1{
      margin:0;
      font-size:18px;
      letter-spacing:-.2px;
    }
    .brand p{
      margin:0;
      font-size:13px;
      color:var(--muted);
      line-height:1.35;
    }
    .chipRow{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }
    .chip{
      border:1px solid var(--line);
      background:#fff;
      padding:8px 10px;
      border-radius:999px;
      font-size:12px;
      color:var(--muted);
      user-select:none;
      white-space:nowrap;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:14px;
      padding-top:16px;
    }
    @media (max-width: 860px){
      .grid{ grid-template-columns:1fr; }
    }

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
    }
    .card h2{
      margin:0 0 10px;
      font-size:15px;
      letter-spacing:-.1px;
    }
    .hint{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.45;
    }

    .stampGrid{
      display:grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap:10px;
      margin-top:12px;
    }
    @media (max-width: 860px){
      .stampGrid{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }
    .stampBtn{
      background:#fff;
      border:1px solid var(--line);
      border-radius: 14px;
      padding:10px 10px 12px;
      text-align:center;
      cursor:pointer;
      transition: transform .08s ease, box-shadow .12s ease, border-color .12s ease;
      box-shadow: 0 2px 10px rgba(0,0,0,.04);
    }
    .stampBtn:active{ transform: scale(.98); }
    .stampIcon{
      width:46px; height:46px;
      border-radius:999px;
      margin: 0 auto 8px;
      display:grid;
      place-items:center;
      border: 1px solid var(--line);
      background: #fff;
      font-size:18px;
    }
    .stampName{
      font-size:12px;
      color: var(--ink);
      margin:0;
      line-height:1.2;
      letter-spacing:-.1px;
    }
    .stampSub{
      margin:6px 0 0;
      font-size:11px;
      color: var(--muted);
    }

    .section{
      margin-top:14px;
      padding-top:14px;
      border-top:1px dashed var(--line);
    }
    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:10px;
    }
    .btn{
      border:1px solid var(--line);
      background:#fff;
      border-radius: 12px;
      padding: 10px 12px;
      font-size:13px;
      cursor:pointer;
    }
    .btnPrimary{
      background:#111827;
      border-color:#111827;
      color:#fff;
    }

    .kpi{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:10px;
      margin-top:10px;
    }
    @media (max-width: 520px){
      .kpi{ grid-template-columns:1fr; }
    }
    .kpiBox{
      background:#fff;
      border:1px solid var(--line);
      border-radius: 14px;
      padding: 12px;
    }
    .kpiBox .label{
      font-size:12px;
      color:var(--muted);
      margin:0 0 6px;
    }
    .kpiBox .value{
      font-size:18px;
      margin:0;
      letter-spacing:-.2px;
    }

    .detailTitle{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .badge{
      display:inline-flex;
      gap:6px;
      align-items:center;
      padding:6px 10px;
      border-radius:999px;
      background:#fff;
      border:1px solid var(--line);
      font-size:12px;
      color:var(--muted);
    }
    .hr{
      height:1px;
      background:var(--line);
      margin: 12px 0;
    }
    .small{
      font-size:12px;
      color:var(--muted);
      line-height:1.45;
    }

    /* Toast */
    .toast{
      position:fixed;
      left:50%;
      bottom:16px;
      transform: translateX(-50%);
      background:#111827;
      color:#fff;
      padding:10px 12px;
      border-radius:999px;
      font-size:12px;
      opacity:0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
    }
    .toast.show{
      opacity:1;
      transform: translateX(-50%) translateY(-4px);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <h1>ì˜¤ë¥´ë½ë³„ ì²´í—˜ ì›¹ì•±</h1>
        <p>ìŠ¤ë§ˆíŠ¸í°ìœ¼ë¡œ <b>NFC í„°ì¹˜</b> ë˜ëŠ” <b>QR ìŠ¤ìº”</b> â†’ ì•ˆë‚´/í¬ì¸íŠ¸/AR ì˜ˆì‹œë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
      </div>
      <div class="chipRow">
        <div class="chip">ì „ì‹œìš© ë°ëª¨</div>
        <div class="chip" id="chipLink">URL: -</div>
      </div>
    </header>

    <main class="grid">
      <!-- ì¢Œì¸¡: ìŠ¤íƒ¬í”„ ì„ íƒ -->
      <section class="card" aria-label="ë„ì¥ ì„ íƒ">
        <h2>ë„ì¥ ì„ íƒ (5)</h2>
        <p class="hint">ì›í•˜ëŠ” ì˜¤ë¦„ì„ ì„ íƒí•˜ë©´ ì•„ë˜ì—ì„œ ì½˜í…ì¸ ê°€ ì—´ë¦½ë‹ˆë‹¤. NFCëŠ” URL ë’¤ì— í•´ì‹œ(#)ë¡œ ì—°ê²°í•˜ë©´ ë” ê¹”ë”í•´ìš”.</p>

        <div class="stampGrid" id="stampGrid"></div>

        <div class="section">
          <h2>NFC/QR ì•ˆë‚´ ë¬¸êµ¬(ì „ì‹œìš©)</h2>
          <p class="hint" style="margin-bottom:10px;">
            ì•„ë˜ ë¬¸êµ¬ ì¤‘ í•˜ë‚˜ë¥¼ íŒ¨ë„ì— ë„£ì–´ ì“°ì„¸ìš”.
          </p>
          <div class="row">
            <span class="badge">â‘  ì—¬ê¸°ë¥¼ í„°ì¹˜í•˜ì„¸ìš” Â· ì›¹í˜ì´ì§€ ì—´ë¦¼</span>
            <span class="badge">â‘¡ íƒ­í•´ì„œ ì²´í—˜ ì‹œì‘!</span>
            <span class="badge">â‘¢ ìŠ¤ë§ˆíŠ¸í°ìœ¼ë¡œ í„°ì¹˜í•´ ì›¹ì•± ì—´ê¸°</span>
          </div>
        </div>
      </section>

      <!-- ìš°ì¸¡: ìƒì„¸/í¬ì¸íŠ¸/AR -->
      <section class="card" aria-label="ìƒì„¸">
        <div class="detailTitle">
          <h2 id="detailHeading">ì˜¤ë¦„ì„ ì„ íƒí•˜ì„¸ìš”</h2>
          <span class="badge" id="detailBadge">NFC/QR ë°ëª¨</span>
        </div>
        <p class="hint" id="detailDesc">ì™¼ìª½ì—ì„œ ì˜¤ë¦„ì„ ì„ íƒí•˜ë©´ ì•ˆë‚´/í¬ì¸íŠ¸/AR ì˜ˆì‹œ ë§í¬ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>

        <div class="hr"></div>

        <h2>í¬ì¸íŠ¸</h2>
        <div class="kpi">
          <div class="kpiBox">
            <p class="label">íšë“ í¬ì¸íŠ¸(ì˜ˆì‹œ)</p>
            <p class="value" id="pointsValue">0 P</p>
          </div>
          <div class="kpiBox">
            <p class="label">ëˆ„ì  ë„ì¥(ì˜ˆì‹œ)</p>
            <p class="value" id="stampsValue">0 / 5</p>
          </div>
          <div class="kpiBox">
            <p class="label">ì‚¬ìš©ì²˜</p>
            <p class="value">ì§€ì—­ êµ¿ì¦ˆ</p>
          </div>
        </div>
        <p class="small" style="margin-top:8px;">
          * ì „ì‹œìš© ë°ëª¨ì…ë‹ˆë‹¤. ì‹¤ì œ ì ë¦½/ì‚¬ìš©ì€ ì—°ê²° ì‹œìŠ¤í…œì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ìš”.
        </p>

        <div class="section">
          <h2>AR ì‹œì—° ì˜ˆì‹œ</h2>
          <p class="hint">ì „ì‹œì—ì„œëŠ” â€œì˜ˆì‹œ í™”ë©´â€ë§Œ ë³´ì—¬ì¤˜ë„ ì¶©ë¶„íˆ ì„¤ë“ë ¥ì´ ìˆìŠµë‹ˆë‹¤. (ì˜ìƒ/ì´ë¯¸ì§€/ì™¸ë¶€ ë§í¬)</p>
          <div class="row">
            <button class="btn btnPrimary" id="btnArDemo">AR ì˜ˆì‹œ ë³´ê¸°</button>
            <button class="btn" id="btnInfo">ì•ˆë‚´ í™”ë©´ ë³´ê¸°</button>
            <button class="btn" id="btnShare">ë§í¬ ë³µì‚¬</button>
          </div>
          <p class="small" id="arNote" style="margin-top:10px;">
            AR ì˜ˆì‹œ ë§í¬ë¥¼ ì•„ì§ ì •í•˜ì§€ ì•Šì•˜ë‹¤ë©´, ìœ íŠœë¸Œ/ì´ë¯¸ì§€/í”¼ê·¸ë§ˆ ë§í¬ ë“±ìœ¼ë¡œ ëŒ€ì²´í•´ë„ ì¢‹ì•„ìš”.
          </p>
        </div>
      </section>

      <!-- ì•„ë˜: ì˜¤ë¦„ë³„ ì„¹ì…˜(ìŠ¤í¬ë¡¤ìš© ì•µì»¤) -->
      <section class="card" style="grid-column: 1 / -1;">
        <h2>ì˜¤ë¦„ë³„ ì•ˆë‚´</h2>
        <p class="hint">NFCì— ì•„ë˜ ì•µì»¤ë¥¼ ë„£ìœ¼ë©´ í•´ë‹¹ ì„¹ì…˜ìœ¼ë¡œ ë°”ë¡œ ì´ë™í•©ë‹ˆë‹¤. (ì˜ˆ: <b>https://ë„ë©”ì¸/index.html#geum</b>)</p>

        <div class="section" id="geum">
          <h2>ê¸ˆì˜¤ë¦„</h2>
          <p class="hint">ì—¬ê¸°ì— ê¸ˆì˜¤ë¦„ ì•ˆë‚´ ë¬¸ì¥/ì‚¬ì§„/ì§€ë„ ë§í¬ ë“±ì„ ë„£ìœ¼ì„¸ìš”.</p>
        </div>

        <div class="section" id="saebyeol">
          <h2>ìƒˆë³„ì˜¤ë¦„</h2>
          <p class="hint">ì—¬ê¸°ì— ìƒˆë³„ì˜¤ë¦„ ì•ˆë‚´ ë¬¸ì¥/ì‚¬ì§„/ì§€ë„ ë§í¬ ë“±ì„ ë„£ìœ¼ì„¸ìš”.</p>
        </div>

        <div class="section" id="abu">
          <h2>ì•„ë¶€ì˜¤ë¦„</h2>
          <p class="hint">ì—¬ê¸°ì— ì•„ë¶€ì˜¤ë¦„ ì•ˆë‚´ ë¬¸ì¥/ì‚¬ì§„/ì§€ë„ ë§í¬ ë“±ì„ ë„£ìœ¼ì„¸ìš”.</p>
        </div>

        <div class="section" id="darangshi">
          <h2>ë‹¤ë‘ì‰¬ì˜¤ë¦„</h2>
          <p class="hint">ì—¬ê¸°ì— ë‹¤ë‘ì‰¬ì˜¤ë¦„ ì•ˆë‚´ ë¬¸ì¥/ì‚¬ì§„/ì§€ë„ ë§í¬ ë“±ì„ ë„£ìœ¼ì„¸ìš”.</p>
        </div>

        <div class="section" id="baegyak">
          <h2>ë°±ì•½ì´ì˜¤ë¦„</h2>
          <p class="hint">ì—¬ê¸°ì— ë°±ì•½ì´ì˜¤ë¦„ ì•ˆë‚´ ë¬¸ì¥/ì‚¬ì§„/ì§€ë„ ë§í¬ ë“±ì„ ë„£ìœ¼ì„¸ìš”.</p>
        </div>

        <div class="hr"></div>
        <p class="small">
          ìš´ì˜ íŒ: ì „ì‹œìš©ì´ë©´ â€œê° ì˜¤ë¦„ 1ì¥ ì†Œê°œ + í¬ì¸íŠ¸ ì•ˆë‚´ + AR ì˜ˆì‹œ ë²„íŠ¼â€ ì •ë„ë§Œ ìˆì–´ë„ ì¶©ë¶„íˆ ê·¸ëŸ´ë“¯í•©ë‹ˆë‹¤.
        </p>
      </section>
    </main>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    // ====== ë°ì´í„°(ì˜¤ë¦„ 5ê°œ) ======
    const STAMPS = [
      { id: "geum",      name: "ê¸ˆì˜¤ë¦„",     emoji: "â›°ï¸", points: 30, arUrl: "https://example.com/ar-demo" },
      { id: "saebyeol",  name: "ìƒˆë³„ì˜¤ë¦„",   emoji: "â­", points: 20, arUrl: "https://example.com/ar-demo" },
      { id: "abu",       name: "ì•„ë¶€ì˜¤ë¦„",   emoji: "ğŸŒ¿", points: 20, arUrl: "https://example.com/ar-demo" },
      { id: "darangshi", name: "ë‹¤ë‘ì‰¬ì˜¤ë¦„", emoji: "ğŸŒ™", points: 25, arUrl: "https://example.com/ar-demo" },
      { id: "baegyak",   name: "ë°±ì•½ì´ì˜¤ë¦„", emoji: "ğŸƒ", points: 25, arUrl: "https://example.com/ar-demo" },
    ];

    const els = {
      grid: document.getElementById("stampGrid"),
      heading: document.getElementById("detailHeading"),
      desc: document.getElementById("detailDesc"),
      badge: document.getElementById("detailBadge"),
      points: document.getElementById("pointsValue"),
      stamps: document.getElementById("stampsValue"),
      chipLink: document.getElementById("chipLink"),
      btnAr: document.getElementById("btnArDemo"),
      btnInfo: document.getElementById("btnInfo"),
      btnShare: document.getElementById("btnShare"),
      toast: document.getElementById("toast")
    };

    // ====== ìƒíƒœ(ì „ì‹œ ë°ëª¨ìš©: ë¡œì»¬ë¡œë§Œ ì €ì¥) ======
    const state = {
      selectedId: null,
      earned: new Set(JSON.parse(localStorage.getItem("earnedStamps") || "[]"))
    };

    function save() {
      localStorage.setItem("earnedStamps", JSON.stringify([...state.earned]));
    }

    function toast(msg){
      els.toast.textContent = msg;
      els.toast.classList.add("show");
      setTimeout(() => els.toast.classList.remove("show"), 1400);
    }

    function currentUrlWithHash(hashId){
      const url = new URL(window.location.href);
      url.hash = hashId ? "#" + hashId : "";
      return url.toString();
    }

    function renderStamps(){
      els.grid.innerHTML = "";
      STAMPS.forEach(s => {
        const earned = state.earned.has(s.id);
        const btn = document.createElement("button");
        btn.className = "stampBtn";
        btn.type = "button";
        btn.setAttribute("data-id", s.id);
        btn.innerHTML = `
          <div class="stampIcon" aria-hidden="true">${s.emoji}</div>
          <p class="stampName">${s.name}</p>
          <p class="stampSub">${earned ? "ë„ì¥ ì™„ë£Œ" : "ì„ íƒ/íƒ­"}</p>
        `;
        btn.addEventListener("click", () => selectStamp(s.id, true));
        els.grid.appendChild(btn);
      });
      els.stamps.textContent = `${state.earned.size} / ${STAMPS.length}`;
    }

    function selectStamp(id, scrollIntoView){
      const stamp = STAMPS.find(s => s.id === id);
      if(!stamp) return;

      state.selectedId = id;

      els.heading.textContent = stamp.name;
      els.desc.textContent = `ì•ˆë‚´/í¬ì¸íŠ¸/AR ì˜ˆì‹œë¥¼ í™•ì¸í•˜ì„¸ìš”. (NFC/QRë¡œ ì´ í™”ë©´ì„ ë°”ë¡œ ì—´ ìˆ˜ ìˆì–´ìš”)`;
      els.badge.textContent = `#${stamp.id}`;
      els.points.textContent = `${stamp.points} P (ì˜ˆì‹œ)`;
      els.chipLink.textContent = `URL: ${currentUrlWithHash(stamp.id).replace(/^https?:\/\//,"")}`;

      // ë²„íŠ¼ ë™ì‘
      els.btnAr.onclick = () => window.open(stamp.arUrl, "_blank", "noopener,noreferrer");
      els.btnInfo.onclick = () => {
        // ì „ì‹œìš©: 'ë„ì¥ ì™„ë£Œ' í† ê¸€ + í•´ë‹¹ ì„¹ì…˜ ì´ë™
        const earned = state.earned.has(stamp.id);
        if(earned){
          state.earned.delete(stamp.id);
          toast("ë„ì¥ í•´ì œ(ë°ëª¨)");
        }else{
          state.earned.add(stamp.id);
          toast("ë„ì¥ ì™„ë£Œ(ë°ëª¨)");
        }
        save();
        renderStamps();
        // ìŠ¤í¬ë¡¤ ì´ë™
        document.getElementById(stamp.id)?.scrollIntoView({behavior:"smooth", block:"start"});
      };

      els.btnShare.onclick = async () => {
        const link = currentUrlWithHash(stamp.id);
        try{
          await navigator.clipboard.writeText(link);
          toast("ë§í¬ ë³µì‚¬ë¨");
        }catch(e){
          prompt("ì•„ë˜ ë§í¬ë¥¼ ë³µì‚¬í•˜ì„¸ìš”:", link);
        }
      };

      if(scrollIntoView){
        window.location.hash = stamp.id;
        document.getElementById(stamp.id)?.scrollIntoView({behavior:"smooth", block:"start"});
      }
    }

    // ====== ì´ˆê¸°í™” ======
    renderStamps();

    // NFC/QRë¡œ ë“¤ì–´ì˜¬ ë•Œ #hash ì²˜ë¦¬
    const initialHash = (window.location.hash || "").replace("#","");
    if(initialHash){
      selectStamp(initialHash, false);
      // ë“¤ì–´ì˜¤ìë§ˆì í•´ë‹¹ ì„¹ì…˜ìœ¼ë¡œ ì´ë™
      setTimeout(() => {
        document.getElementById(initialHash)?.scrollIntoView({behavior:"smooth", block:"start"});
      }, 50);
    } else {
      // í•´ì‹œê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ ë§í¬ í‘œì‹œ
      els.chipLink.textContent = `URL: ${currentUrlWithHash("").replace(/^https?:\/\//,"")}`;
    }

    // í•´ì‹œ ë³€ê²½ ì‹œì—ë„ ë°˜ì˜
    window.addEventListener("hashchange", () => {
      const h = (window.location.hash || "").replace("#","");
      if(h) selectStamp(h, false);
    });
  </script>
</body>
</html>
